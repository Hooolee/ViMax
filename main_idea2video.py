import asyncio
from pipelines.idea2video_pipeline import Idea2VideoPipeline


# SET YOUR OWN IDEA, USER REQUIREMENT, AND STYLE HERE
idea = \
"""
午后的阳光慷慨地洒满社区公园，却在林小雨周身形成一道无形的屏障。她独自坐在长椅上，低垂着头，耳机里流淌的音乐也驱不散心头的烦闷。小组合作者的推诿、秒空的演唱会门票、甚至常去奶茶店门口挂着的“今日休息”牌子……一连串微不足道却实实在在的挫败感，像梅雨季节的湿气，黏糊糊地裹住了她。
“是不是水逆啊……”她轻轻叹了口气，向后靠去，闭上眼，想把这一切暂时屏蔽。
一阵不成调却透着快活劲儿的哼唱声钻进她的耳朵。她睁开眼，循声望去。不远处的花坛边，一位精神矍铄的老大爷正熟练地侍弄着一片金灿灿的向日葵。他脸上的皱纹像绽放的菊花，写满了惬意与满足。
林小雨的目光被老大爷的动作吸引。他正小心翼翼地将一根细长的木棍支在一株明显歪向一边的向日葵旁，用柔软的布条轻轻捆绑，动作轻柔得像在呵护一个婴儿。
那株向日葵的茎秆纤细，花朵也因倾斜而显得有些无精打采。林小雨忍不住开口，声音带着一丝自己都未察觉的沉闷：“大爷，这株向日葵都歪成这样了，还能活好吗？”
陈大爷闻声转过头，看到是个愁眉不展的小姑娘，脸上的笑容更加慈祥，声音洪亮地说：“哈哈，小姑娘，这你就不懂啦！它不是在倒下，它是在努力地转身，寻找光的方向呢！”
他拍了拍手上的泥土，走到林小雨附近的长椅边坐下，指了指那株向日葵：“你看，前几天旁边那棵大树长了新枝，挡住了它一部分阳光。它可不是认命的主，瞧见那边缝隙里漏过来的光没？它正使劲儿把‘脑袋’扭过去呢！我帮它一把，它就能更快地拥抱太阳。”
“寻找……光的方向？”林小雨喃喃道，这句话像颗小石子，在她沉寂的心湖里激起了一圈涟漪。
“对啊！”陈大爷乐呵呵地继续说，“这人啊，有时候就跟这花儿一样。遇到点遮挡，暂时身处阴影里，再正常不过了。关键是得学它，别轻易低头，得自己个儿有那份儿‘扭头’的劲儿，主动去找光。光啊，一直都在，就看你愿不愿意转身。”
就在这时，一个穿着蓬蓬裙的小女孩像只快乐的小蝴蝶，蹦蹦跳跳地跑过来，手里举着一个歪歪扭扭、勉强能看出是朵向日葵的涂鸦，兴高采烈地喊：“陈爷爷！陈爷爷！你看我画的‘太阳花’！像不像？”
那画作色彩奔放，线条稚拙，却充满了蓬勃的生命力。陈大爷接过画，夸张地赞叹道：“像！太像了！比真花还精神！我们把它贴在花坛的提示板上，让所有路过的人都看看这份光亮，好不好？”
“好！”小女孩雀跃着。
看着这一老一少灿烂的笑容，看着那株正在努力“转身”的向日葵，再看看小女孩笔下那朵充满生命张力的“太阳花”，林小雨忽然觉得心头的滞涩感松动了一些。那些困扰她的琐碎烦恼，似乎并没有想象中那么沉重得无法撼动。
她站起身，深深地吸了一口气，空气中混合着泥土的芬芳和阳光的味道。她朝着陈大爷和小女孩露出一个真诚的微笑：“谢谢您，大爷。我好像……知道该怎么‘转身’了。”
她迈开脚步，不再是之前的沉重拖沓，而是变得轻快而坚定。夕阳将她的影子拉得长长的，镀上了一层温暖的金色。路过那家休息的奶茶店时，她看到玻璃窗上贴着的可爱告示，竟觉得有几分可爱。
“也许，明天可以试试新口味。”她心里想着，脚步未停。
拐过街角，一大片绚烂的晚霞毫无征兆地撞入她的眼帘，铺满了整个天空，壮丽而温暖。林小雨停下脚步，静静地望着这片光，脸上终于露出了释然而明亮的笑容。
原来，光真的一直都在。只需要一个简单的转身。
"""
user_requirement = \
"""
For children, do not exceed 3 scenes. Each scene should be no more than 5 shots.
"""
style = "Cartoon"


async def main():
    pipeline = Idea2VideoPipeline.init_from_config(config_path="configs/idea2video.yaml")
    await pipeline(idea=idea, user_requirement=user_requirement, style=style)

if __name__ == "__main__":
    asyncio.run(main())
